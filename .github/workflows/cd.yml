name: "CD Pipeline / workflow"

on:
       workflow_run:
              workflows: ["sample React CI Pipeline / workflow"]
              types:
                     - completed
jobs:
       deploy:
              runs-on: ubuntu-latest
              environment: production

              steps:
                     - name: "setup node js"
                       uses: actions/setup-node@v4
                       with:
                         node-version: '21'

                     - name: "SetUp Vercel CLI"
                       run: npm i -g vercel

                     - name: "Download build files"
                       uses: actions/download-artifact@v4
                       with:
                            name: bulid
                            run-id: ${{ github.event.workflow_run.id }}
                            github-token: ${{ secrets.GITHUB_TOKEN }}

                     - name: "Deploy to Vercel"
                       run: vercel --prod --token=${{ secrets.VERCEL_TOKEN }} --confirm --name=cicdproject

